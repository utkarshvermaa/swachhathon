{"version":3,"sources":["../../src/providers/locations.ts","../../node_modules/@angular/core/src/linker lazy","../../src/pages/home/home.ts","../../src/pages/map/map.ts","../../src/providers/google-maps.ts","../../src/providers/connectivity.ts","../../src/pages/list/list.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\n\r\n@Injectable()\r\nexport class Locations {\r\n\r\n\tdata: any;\r\n\r\n\tconstructor(public http: Http) {\r\n\r\n\t}\r\n\r\n\tload(){\r\n\r\n\t\tif(this.data){\r\n\t\t\treturn Promise.resolve(this.data);\r\n\t\t}\r\n\r\n\t\treturn new Promise(resolve => {\r\n\r\n\t\t\tthis.http.get('assets/data/locations.json').map(res => res.json()).subscribe(data => {\r\n\t\t\t\t\r\n\t\t\t\tthis.data = this.applyHaversine(data.locations);\r\n\r\n\t\t\t\tthis.data.sort((locationA, locationB) => {\r\n\t\t\t\t\treturn locationA.distance - locationB.distance;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresolve(this.data);\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tapplyHaversine(locations){\r\n\r\n\t\tlet usersLocation = {\r\n\t\t\tlat: 40.713744, \r\n\t\t\tlng: -74.009056\r\n\t\t};\r\n\r\n\t\tlocations.map((location) => {\r\n\r\n\t\t\tlet placeLocation = {\r\n\t\t\t\tlat: location.latitude,\r\n\t\t\t\tlng: location.longitude\r\n\t\t\t};\r\n\r\n\t\t\tlocation.distance = this.getDistanceBetweenPoints(\r\n\t\t\t\tusersLocation,\r\n\t\t\t\tplaceLocation,\r\n\t\t\t\t'miles'\r\n\t\t\t).toFixed(2);\r\n\t\t});\r\n\r\n\t\treturn locations;\r\n\t}\r\n\r\n\tgetDistanceBetweenPoints(start, end, units){\r\n\r\n\t    let earthRadius = {\r\n\t        miles: 3958.8,\r\n\t        km: 6371\r\n\t    };\r\n\t \r\n\t    let R = earthRadius[units || 'miles'];\r\n\t    let lat1 = start.lat;\r\n\t    let lon1 = start.lng;\r\n\t    let lat2 = end.lat;\r\n\t    let lon2 = end.lng;\r\n\t \r\n\t    let dLat = this.toRad((lat2 - lat1));\r\n\t    let dLon = this.toRad((lon2 - lon1));\r\n\t    let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n\t    Math.cos(this.toRad(lat1)) * Math.cos(this.toRad(lat2)) *\r\n\t    Math.sin(dLon / 2) *\r\n\t    Math.sin(dLon / 2);\r\n\t    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t    let d = R * c;\r\n\t \r\n\t    return d;\r\n\r\n\t}\r\n\r\n\ttoRad(x){\r\n\t\treturn x * Math.PI / 180;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/locations.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 221;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/src/linker lazy\n// module id = 221\n// module chunks = 0","import { Component } from '@angular/core';\r\nimport { MapPage } from '../map/map';\r\nimport { ListPage } from '../list/list';\r\n\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n\r\n  tab1Root: any = MapPage;\r\n  tab2Root: any = ListPage;\r\n\r\n  constructor(){\r\n\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { Locations } from '../../providers/locations';\r\nimport { GoogleMaps } from '../../providers/google-maps';\r\nimport { NavController, Platform } from 'ionic-angular';\r\n\r\n@Component({\r\n  selector: 'page-map',\r\n  templateUrl: 'map.html'\r\n})\r\nexport class MapPage {\r\n\r\n\t@ViewChild('map') mapElement: ElementRef;\r\n\t@ViewChild('pleaseConnect') pleaseConnect: ElementRef;\r\n\r\n\tconstructor(public navCtrl: NavController, public maps: GoogleMaps, public platform: Platform, public locations: Locations) {\r\n\r\n\t}\r\n\r\n\tionViewDidLoad(){\r\n\r\n\t\tthis.platform.ready().then(() => {\r\n\r\n\t\t    let mapLoaded = this.maps.init(this.mapElement.nativeElement, this.pleaseConnect.nativeElement);\r\n\t    \tlet locationsLoaded = this.locations.load();\r\n\r\n\t    \tPromise.all([\r\n\t    \t\tmapLoaded,\r\n\t    \t\tlocationsLoaded\r\n\t    \t]).then((result) => {\r\n\r\n\t    \t\tlet locations = result[1];\r\n\r\n\t    \t\tfor(let location of locations){\r\n\t    \t\t\tthis.maps.addMarker(location.latitude, location.longitude);\r\n\t    \t\t}\r\n\r\n\t    \t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts","import { Injectable } from '@angular/core';\r\nimport { Connectivity } from './connectivity';\r\nimport { Geolocation } from 'ionic-native';\r\n\r\ndeclare var google;\r\n\r\n@Injectable()\r\nexport class GoogleMaps {\r\n\r\n  mapElement: any;\r\n  pleaseConnect: any;\r\n  map: any;\r\n  mapInitialised: boolean = false;\r\n  mapLoaded: any;\r\n  mapLoadedObserver: any;\r\n  markers: any = [];\r\n  apiKey: string;\r\n\r\n  constructor(public connectivityService: Connectivity) {\r\n\r\n  }\r\n\r\n  init(mapElement: any, pleaseConnect: any): Promise<any> {\r\n\r\n    this.mapElement = mapElement;\r\n    this.pleaseConnect = pleaseConnect;\r\n\r\n    return this.loadGoogleMaps();\r\n\r\n  }\r\n\r\n  loadGoogleMaps(): Promise<any> {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      if(typeof google == \"undefined\" || typeof google.maps == \"undefined\"){\r\n\r\n        console.log(\"Google maps JavaScript needs to be loaded.\");\r\n        this.disableMap();\r\n\r\n        if(this.connectivityService.isOnline()){\r\n\r\n          window['mapInit'] = () => {\r\n\r\n            this.initMap().then(() => {\r\n              resolve(true);\r\n            });\r\n\r\n            this.enableMap();\r\n          }\r\n\r\n          let script = document.createElement(\"script\");\r\n          script.id = \"googleMaps\";\r\n\r\n          if(this.apiKey){\r\n            script.src = 'http://maps.google.com/maps/api/js?key=' + this.apiKey + '&callback=mapInit';\r\n          } else {\r\n            script.src = 'http://maps.google.com/maps/api/js?callback=mapInit';       \r\n          }\r\n\r\n          document.body.appendChild(script);  \r\n\r\n        } \r\n      }\r\n      else {\r\n\r\n        if(this.connectivityService.isOnline()){\r\n          this.initMap();\r\n          this.enableMap();\r\n        }\r\n        else {\r\n          this.disableMap();\r\n        }\r\n\r\n      }\r\n\r\n      this.addConnectivityListeners();\r\n\r\n    });\r\n\r\n  }\r\n\r\n  initMap(): Promise<any> {\r\n\r\n    this.mapInitialised = true;\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      Geolocation.getCurrentPosition().then((position) => {\r\n\r\n      \t// UNCOMMENT FOR NORMAL USE\r\n        //let latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n\r\n        let latLng = new google.maps.LatLng(40.713744, -74.009056);\r\n\r\n        let mapOptions = {\r\n          center: latLng,\r\n          zoom: 15,\r\n          mapTypeId: google.maps.MapTypeId.ROADMAP\r\n        }\r\n\r\n        this.map = new google.maps.Map(this.mapElement, mapOptions);\r\n        resolve(true);\r\n\r\n      });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  disableMap(): void {\r\n\r\n    if(this.pleaseConnect){\r\n      this.pleaseConnect.style.display = \"block\";\r\n    }\r\n\r\n  }\r\n\r\n  enableMap(): void {\r\n\r\n    if(this.pleaseConnect){\r\n      this.pleaseConnect.style.display = \"none\";\r\n    }\r\n\r\n  }\r\n\r\n  addConnectivityListeners(): void {\r\n\r\n    document.addEventListener('online', () => {\r\n\r\n      console.log(\"online\");\r\n\r\n      setTimeout(() => {\r\n\r\n        if(typeof google == \"undefined\" || typeof google.maps == \"undefined\"){\r\n          this.loadGoogleMaps();\r\n        } \r\n        else {\r\n          if(!this.mapInitialised){\r\n            this.initMap();\r\n          }\r\n\r\n          this.enableMap();\r\n        }\r\n\r\n      }, 2000);\r\n\r\n    }, false);\r\n\r\n    document.addEventListener('offline', () => {\r\n\r\n      console.log(\"offline\");\r\n\r\n      this.disableMap();\r\n\r\n    }, false);\r\n\r\n  }\r\n\r\n  addMarker(lat: number, lng: number): void {\r\n\r\n    let latLng = new google.maps.LatLng(lat, lng);\r\n\r\n    let marker = new google.maps.Marker({\r\n      map: this.map,\r\n      animation: google.maps.Animation.DROP,\r\n      position: latLng\r\n    });\r\n\r\n    this.markers.push(marker);  \r\n      \r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/google-maps.ts","import { Injectable } from '@angular/core';\r\nimport { Network } from 'ionic-native';\r\nimport { Platform } from 'ionic-angular';\r\n\r\ndeclare var Connection;\r\n\r\n@Injectable()\r\nexport class Connectivity {\r\n\r\n  onDevice: boolean;\r\n\r\n  constructor(public platform: Platform){\r\n    this.onDevice = this.platform.is('cordova');\r\n  }\r\n\r\n  isOnline(): boolean {\r\n    if(this.onDevice && Network.connection){\r\n      return Network.connection !== Connection.NONE;\r\n    } else {\r\n      return navigator.onLine; \r\n    }\r\n  }\r\n\r\n  isOffline(): boolean {\r\n    if(this.onDevice && Network.connection){\r\n      return Network.connection === Connection.NONE;\r\n    } else {\r\n      return !navigator.onLine;   \r\n    }\r\n  }\r\n  \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/connectivity.ts","import { Component } from '@angular/core';\r\nimport { NavController } from 'ionic-angular';\r\nimport { Locations } from '../../providers/locations';\r\n\r\n@Component({\r\n  selector: 'page-list',\r\n  templateUrl: 'list.html'\r\n})\r\nexport class ListPage {\r\n\r\n  constructor(public navCtrl: NavController, public locations: Locations) {}\r\n\r\n  ionViewDidLoad() {\r\n    console.log('Hello ListPage Page');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list/list.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\r\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\r\nimport { MyApp } from './app.component';\r\nimport { HomePage } from '../pages/home/home';\r\nimport { MapPage } from '../pages/map/map';\r\nimport { ListPage } from '../pages/list/list';\r\nimport { Locations } from '../providers/locations';\r\nimport { GoogleMaps } from '../providers/google-maps';\r\nimport { Connectivity } from '../providers/connectivity';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    HomePage,\r\n    MapPage,\r\n    ListPage\r\n  ],\r\n  imports: [\r\n    IonicModule.forRoot(MyApp)\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    HomePage,\r\n    MapPage,\r\n    ListPage\r\n  ],\r\n  providers: [{provide: ErrorHandler, useClass: IonicErrorHandler}, Locations, GoogleMaps, Connectivity]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\r\nimport { Platform } from 'ionic-angular';\r\nimport { StatusBar, Splashscreen } from 'ionic-native';\r\n\r\nimport { HomePage } from '../pages/home/home';\r\n\r\n\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  rootPage = HomePage;\r\n\r\n  constructor(platform: Platform) {\r\n    platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      StatusBar.styleDefault();\r\n      Splashscreen.hide();\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}